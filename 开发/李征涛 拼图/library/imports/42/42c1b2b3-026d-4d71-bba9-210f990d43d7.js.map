{"version":3,"sources":["assets\\script\\block.js"],"names":["cc","Class","Component","properties","onLoad","node","on","touchStart","touchMove","touchEnd","e","opacity","startPos","position","zIndex","delta","getDelta","x","y","width","height","index","getPos2Index","log","tmpNode","window","game","picNodeArr","parseInt","i","j","setPosition","stIndex","pos","Math","abs","init","picTexture","sprite","getComponent","Sprite","frame","SpriteFrame","rect","spriteFrame","onDestroy","off","start"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n     onLoad () {\n        this.node.on('touchstart',this.touchStart,this);\n        this.node.on('touchmove',this.touchMove,this);\n         this.node.on('touchend',this.touchEnd,this);\n\n     },\n    touchStart(e){\n        this.node.opacity =128;\n        this.startPos = this.node.position;\n        this.node.zIndex =1;\n    },\n    touchMove(e){\n        let delta =e.getDelta();\n        this.node.x +=delta.x;\n        this.node.y += delta.y;\n    },\n    touchEnd(e){\n        this.node.opacity =255;\n        this.node.zIndex =0;\n        let  width  =this.node.width;\n        let height = this.node.height;\n        let index =this.getPos2Index(this.node.position)\n        cc.log(index)\n        //cc.log(123456)\n        //cc.log(window.game);\n        //cc.log(window.game.picNodeArr[1][1]);\n        //cc.log(\"index的值\");\n        //cc.log();\n        let tmpNode=window.game.picNodeArr[parseInt(index.i)][parseInt(index.j)];\n\n        if(tmpNode){\n            this.node.setPosition(index.j*width,-index.i*height);\n            cc.log(this.startPos);\n            tmpNode.setPosition(this.startPos);\n            let stIndex =this.getPos2Index(this.startPos);\n            cc.log(stIndex.i+\" \"+stIndex.j);\n            window.game.picNodeArr[stIndex.i][stIndex.j] =tmpNode;\n            window.game.picNodeArr[index.i][index.j]= this.node;\n            cc.log(index.i+\" \"+index.j);\n        }else {\n            this.node.setPosition(this.startPos);\n        }\n\n    },\n    getPos2Index(pos){\n        let  width  =this.node.width;\n        let height = this.node.height;\n        cc.log(width);\n        let i = Math.abs(parseInt(pos.y / height));\n        let j =Math.abs(parseInt(pos.x / width));\n        return {\n            i,j\n        }\n    },\n    init(picTexture,pos){\n        let sprite = this.node.getComponent(cc.Sprite);\n        let width =this.node.width;\n        let height = this.node.height;\n        let frame  = new cc.SpriteFrame(picTexture,cc.rect(parseInt(pos.x*width),parseInt(pos.y*height),width,height));\n        sprite.spriteFrame =frame;\n    },\n    onDestroy(){\n        this.node.off('touchstart',this.touchStart,this);\n        this.node.off('touchmove',this.touchMove,this);\n        this.node.off('touchend',this.touchEnd,this);\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n});\n"]}