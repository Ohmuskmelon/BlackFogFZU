{"version":3,"sources":["assets/scripts/bag/useTool.js"],"names":["cc","Class","Component","properties","tip","Node","mynode","onLoad","find","textLabel","getChildByName","getComponent","Label","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","game","addPersistRootNode","start","event","contactItem","window","Global","itemName","scene","currentScene","keyCode","macro","KEY","r","console","log","InUse","Items","used","tool","string"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,GAAG,EAACJ,EAAE,CAACK,IADC;IAERC,MAAM,EAACN,EAAE,CAACK;EAFF,CAHP;EAQL;EAEAE,MAVK,oBAUK;IACN,KAAKH,GAAL,GAAYJ,EAAE,CAACQ,IAAH,CAAQ,wBAAR,CAAZ;IACA,KAAKC,SAAL,GAAiB,KAAKL,GAAL,CAASM,cAAT,CAAwB,WAAxB,EAAqCC,YAArC,CAAkDX,EAAE,CAACY,KAArD,CAAjB;IACAZ,EAAE,CAACa,WAAH,CAAeC,EAAf,CAAkBd,EAAE,CAACe,WAAH,CAAeC,SAAf,CAAyBC,QAA3C,EAAqD,KAAKC,SAA1D,EAAqE,IAArE;IACAlB,EAAE,CAACa,WAAH,CAAeC,EAAf,CAAkBd,EAAE,CAACe,WAAH,CAAeC,SAAf,CAAyBG,MAA3C,EAAmD,KAAKC,OAAxD,EAAiE,IAAjE;IACApB,EAAE,CAACqB,IAAH,CAAQC,kBAAR,CAA2B,KAAKhB,MAAhC;EACH,CAhBI;EAmBLiB,KAnBK,mBAmBI,CACL;EACH,CArBI;EAuBLL,SAvBK,qBAuBKM,KAvBL,EAuBW;IACZ;IACA,KAAKC,WAAL,GAAmBC,MAAM,CAACC,MAAP,CAAcC,QAAjC;IACA,KAAKC,KAAL,GAAaH,MAAM,CAACC,MAAP,CAAcG,YAA3B;;IACA,IAAGN,KAAK,CAACO,OAAN,IAAiB/B,EAAE,CAACgC,KAAH,CAASC,GAAT,CAAaC,CAAjC,EAAmC;MAC/BC,OAAO,CAACC,GAAR,CAAY,WAASV,MAAM,CAACW,KAA5B;;MACA,IAAGX,MAAM,CAACY,KAAP,CAAa,KAAKT,KAAlB,EAAyB,KAAKJ,WAA9B,EAA2Cc,IAA3C,IAAmD,KAAtD,EAA4D;QACxD,IAAGb,MAAM,CAACW,KAAP,IAAiBX,MAAM,CAACY,KAAP,CAAa,KAAKT,KAAlB,EAAyB,KAAKJ,WAA9B,EAA2Ce,IAA/D,EAAqE;UACjEL,OAAO,CAACC,GAAR,CAAY,cAAZ;UACA,KAAK3B,SAAL,CAAegC,MAAf,GAAwB,UAAxB;UACAf,MAAM,CAACY,KAAP,CAAa,KAAKT,KAAlB,EAAyB,KAAKJ,WAA9B,EAA2Cc,IAA3C,GAAkD,IAAlD;QACH,CAJD,MAKK,IAAGb,MAAM,CAACW,KAAP,IAAgB,EAAnB,EAAsB;UACvB,KAAK5B,SAAL,CAAegC,MAAf,GAAwB,uBAAxB;UACAN,OAAO,CAACC,GAAR,CAAY,sBAAZ;QACH,CAHI,MAID;UACA,KAAK3B,SAAL,CAAegC,MAAf,GAAwB,QAAxB;UACAN,OAAO,CAACC,GAAR,CAAY,YAAZ;QACH;MACJ,CAdD,MAcK;QACD,KAAK3B,SAAL,CAAegC,MAAf,GAAwB,gBAAxB;MACH;IACJ;EACJ;AA/CI,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        tip:cc.Node,\n        mynode:cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.tip =  cc.find(\"Canvas/Main Camera/tip\");\n        this.textLabel = this.tip.getChildByName(\"textLabel\").getComponent(cc.Label);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n        cc.game.addPersistRootNode(this.mynode);\n    },\n\n\n    start () {\n        // cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n    },\n\n    onKeyDown(event){\n        // 背包按钮\n        this.contactItem = window.Global.itemName;\n        this.scene = window.Global.currentScene;\n        if(event.keyCode == cc.macro.KEY.r){\n            console.log(\"InUse:\"+window.InUse);\n            if(window.Items[this.scene][this.contactItem].used == false){\n                if(window.InUse == (window.Items[this.scene][this.contactItem].tool)){\n                    console.log(\"correct tool\");\n                    this.textLabel.string = \"工具使用成功！l\";\n                    window.Items[this.scene][this.contactItem].used = true;\n                }\n                else if(window.InUse == ''){\n                    this.textLabel.string = \"请先手持工具（在背包界面点击工具即可手持）\";\n                    console.log(\"please take the tool\");\n                }\n                else{\n                    this.textLabel.string = \"错误的工具！\";\n                    console.log(\"wrong tool\");\n                }\n            }else{\n                this.textLabel.string = \"这件工具好像已经被使用过了哦\";\n            }\n        }\n    },\n});\n"]}