{"version":3,"sources":["assets/scripts/tip/trigger.js"],"names":["cc","Class","Component","properties","tip","Node","initPlayer","charType","node","parent","name","playerNode","find","tt","canShow","onLoad","start","itemAction","dt","p_pos","convertToWorldSpaceAR","v2","e_pos","dis","Vec2","distance","Global","itemType","itemName","active","update"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;EACL,WAASD,EAAE,CAACE,SADP;EAGLC,UAAU,EAAE;IACRC,GAAG,EAAEJ,EAAE,CAACK;EADA,CAHP;EAOL;EAKAC,UAZK,wBAYQ;IACT,KAAKC,QAAL,GAAgB,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,IAAjC;IACA,KAAKC,UAAL,GAAkBX,EAAE,CAACY,IAAH,CAAQ,kBAAR,CAAlB;IACA,KAAKC,EAAL,GAAU,CAAV;IACA,KAAKC,OAAL,GAAe,KAAf;EACH,CAjBI;EAmBLC,MAnBK,oBAmBK;IACN,KAAKX,GAAL,GAAYJ,EAAE,CAACY,IAAH,CAAQ,wBAAR,CAAZ;IACA,KAAKN,UAAL;EACH,CAtBI;EAwBLU,KAxBK,mBAwBG,CACP,CAzBI;EA2BLC,UA3BK,sBA2BMC,EA3BN,EA2BU;IACX,IAAIC,KAAK,GAAG,KAAKR,UAAL,CAAgBS,qBAAhB,CAAsCpB,EAAE,CAACqB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAtC,CAAZ;IACA,IAAIC,KAAK,GAAG,KAAKd,IAAL,CAAUY,qBAAV,CAAgCpB,EAAE,CAACqB,EAAH,CAAM,CAAN,EAAQ,CAAR,CAAhC,CAAZ;IACA,IAAIE,GAAG,GAAGvB,EAAE,CAACwB,IAAH,CAAQC,QAAR,CAAiBH,KAAjB,EAAwBH,KAAxB,CAAV,CAHW,CAKX;;IACA,IAAII,GAAG,GAAG,GAAN,IAAa,KAAKT,OAAL,IAAgB,KAAjC,EAAwC;MACpCY,MAAM,CAACC,QAAP,GAAkB,KAAKpB,QAAvB;MACAmB,MAAM,CAACE,QAAP,GAAkB,KAAKpB,IAAL,CAAUE,IAA5B;MACA,KAAKN,GAAL,CAASyB,MAAT,GAAkB,IAAlB;MACA,KAAKf,OAAL,GAAe,IAAf;IACH,CALD,MAMM;MACF,IAAIS,GAAG,IAAI,GAAP,IAAc,KAAKT,OAAL,IAAgB,IAAlC,EAAwC;QACpC,KAAKV,GAAL,CAASyB,MAAT,GAAkB,KAAlB;QACA,KAAKf,OAAL,GAAe,KAAf;QACAY,MAAM,CAACC,QAAP,GAAkB,GAAlB;QACAD,MAAM,CAACE,QAAP,GAAkB,GAAlB;MACH;IACJ;EACJ,CA/CI;EAiDLE,MAjDK,kBAiDEZ,EAjDF,EAiDM;IACP,KAAKL,EAAL,IAAWK,EAAX;;IACA,IAAI,KAAKL,EAAL,IAAW,GAAf,EAAoB;MAChB,KAAKI,UAAL,CAAgBC,EAAhB;MACA,KAAKL,EAAL,GAAU,CAAV;IACH;EACJ;AAvDI,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        tip: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    \n\n\n    initPlayer() {\n        this.charType = this.node.parent.name;\n        this.playerNode = cc.find(\"Canvas/bg/player\");\n        this.tt = 0;\n        this.canShow = false;\n    },\n\n    onLoad () {\n        this.tip =  cc.find(\"Canvas/Main Camera/tip\");\n        this.initPlayer();\n    },\n\n    start() {\n    },\n\n    itemAction(dt) {\n        let p_pos = this.playerNode.convertToWorldSpaceAR(cc.v2(0,0));\n        let e_pos = this.node.convertToWorldSpaceAR(cc.v2(0,0));\n        let dis = cc.Vec2.distance(e_pos, p_pos);\n\n        // console.log(\"type:\"+window.Global.itemType+\":\"+dis);\n        if (dis < 100 && this.canShow == false) {\n            Global.itemType = this.charType;\n            Global.itemName = this.node.name;\n            this.tip.active = true;\n            this.canShow = true;\n        }\n        else  {\n            if (dis >= 100 && this.canShow == true) {\n                this.tip.active = false;\n                this.canShow = false;\n                Global.itemType = ' ';\n                Global.itemName = ' ';\n            }\n        }\n    },\n    \n    update(dt) {\n        this.tt += dt;\n        if (this.tt >= 0.3) {\n            this.itemAction(dt);\n            this.tt = 0;\n        }\n    },\n});\n"]}